<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸƒ Spooky Sliding Puzzle ğŸ‘»</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }

            25% {
                transform: translateY(-20px) rotate(5deg);
            }

            50% {
                transform: translateY(-40px) rotate(-5deg);
            }

            75% {
                transform: translateY(-20px) rotate(3deg);
            }
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(255, 107, 53, 0.5), 0 0 40px rgba(255, 107, 53, 0.3);
            }

            50% {
                box-shadow: 0 0 40px rgba(255, 107, 53, 0.8), 0 0 60px rgba(255, 107, 53, 0.5);
            }
        }

        @keyframes shake {
            0%, 100% {
                transform: rotate(0deg);
            }

            25% {
                transform: rotate(-3deg);
            }

            75% {
                transform: rotate(3deg);
            }
        }

        @keyframes bloodSlide {
            0% {
                box-shadow: 0 0 0 rgba(139, 0, 0, 0);
            }

            50% {
                box-shadow: 0 0 30px rgba(139, 0, 0, 0.8), 0 0 50px rgba(220, 20, 60, 0.6);
            }

            100% {
                box-shadow: 0 0 0 rgba(139, 0, 0, 0);
            }
        }

        .blood-slide {
            animation: bloodSlide 0.3s ease-out;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ”¥ FIREBASE CONFIGURATION - REPLACE WITH YOUR CONFIG FROM FIREBASE CONSOLE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //
    // HOW TO GET YOUR CONFIG:
    // 1. Go to https://console.firebase.google.com/
    // 2. Select your project (or create a new one)
    // 3. Click the gear icon âš™ï¸ > Project Settings
    // 4. Scroll down to "Your apps" section
    // 5. Click the web icon </> to register your app
    // 6. Copy the firebaseConfig object and paste it below
    //
    // IMPORTANT: Replace ALL values below with your actual Firebase config
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    const firebaseConfig = {
    apiKey: "AIzaSyCdyeAVxETu5upcMAIWIKi5ykuqcuhSDXk",
    authDomain: "spooky-puzzle-game-7dcf4.firebaseapp.com",
    projectId: "spooky-puzzle-game-7dcf4",
    storageBucket: "spooky-puzzle-game-7dcf4.firebasestorage.app",
    messagingSenderId: "838626431807",
    appId: "1:838626431807:web:c0c6e5d151e395f3e8b98a"
    };

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // END OF FIREBASE CONFIGURATION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    // Initialize Firebase
    let db = null;
    let firebaseInitialized = false;

    try {
      if (firebaseConfig.apiKey !== "YOUR_API_KEY_HERE") {
        if (!firebase.apps.length) {
          firebase.initializeApp(firebaseConfig);
        }
        db = firebase.firestore();
        firebaseInitialized = true;
        console.log("âœ… Firebase initialized successfully! Global leaderboard is active.");
      } else {
        console.log("âš ï¸ Firebase not configured. Using local storage only.");
        console.log("ğŸ“ To enable global leaderboard, update the firebaseConfig in the HTML file.");
      }
    } catch (error) {
      console.error("âŒ Firebase initialization error:", error);
      console.log("ğŸ“ Using local storage fallback.");
    }

    function SlidingPuzzle() {
      const [tiles, setTiles] = useState([0, 1, 2, 3, 4, 5, 6, 7, 8]);
      const [moves, setMoves] = useState(0);
      const [image, setImage] = useState(null);
      const [isWon, setIsWon] = useState(false);
      const [floatingIcons, setFloatingIcons] = useState([]);
      const [playerName, setPlayerName] = useState('');
      const [showNameInput, setShowNameInput] = useState(false);
      const [leaderboard, setLeaderboard] = useState([]);
      const [showLeaderboard, setShowLeaderboard] = useState(false);
      const [startTime, setStartTime] = useState(null);
      const [completionTime, setCompletionTime] = useState(0);
      const [animatingTile, setAnimatingTile] = useState(null);
      const fileInputRef = useRef(null);

      // Load leaderboard on mount
      useEffect(() => {
        loadLeaderboard();
      }, []);

      // Generate random floating icons on sides
      useEffect(() => {
        const icons = ['ğŸ‘»', 'ğŸƒ', 'ğŸ¦‡', 'ğŸ•·ï¸', 'ğŸ’€', 'ğŸ•¸ï¸', 'ğŸˆâ€â¬›', 'ğŸ§›', 'ğŸ§Ÿ', 'ğŸ¬', 'ğŸ­', 'âš°ï¸', 'ğŸŒ™', 'â­', 'ğŸ”®', 'ğŸ•¯ï¸', 'ğŸ§™â€â™€ï¸', 'ğŸ§™â€â™‚ï¸', 'ğŸ­', 'ğŸ¦‰', 'ğŸŒ‘', 'â˜ ï¸', 'ğŸª¦', 'ğŸ‘¹', 'ğŸ‘º', 'ğŸ§Œ', 'ğŸª„', 'âš¡', 'ğŸ’«', 'âœ¨', 'ğŸŒŸ'];
        const positions = [];

        // Left side icons (25 icons)
        for (let i = 0; i < 25; i++) {
          positions.push({
            id: `left-${i}`,
            icon: icons[Math.floor(Math.random() * icons.length)],
            left: 2 + Math.random() * 15,
            top: 5 + Math.random() * 90,
            size: Math.random() * 3 + 2,
            duration: Math.random() * 10 + 5,
            delay: Math.random() * 5
          });
        }

        // Right side icons (25 icons)
        for (let i = 0; i < 25; i++) {
          const iconSize = Math.random() * 3 + 2;
          positions.push({
            id: `right-${i}`,
            icon: icons[Math.floor(Math.random() * icons.length)],
            left: 70 + Math.random() * (30 - iconSize),
            top: 5 + Math.random() * 90,
            size: iconSize,
            duration: Math.random() * 10 + 5,
            delay: Math.random() * 5
          });
        }

        setFloatingIcons(positions);
      }, []);

      const loadLeaderboard = async () => {
  console.log('Loading leaderboard...'); // è°ƒè¯•æ—¥å¿—

  // å…ˆå°è¯•Firebase
  if (db && firebaseInitialized) {
    try {
      const snapshot = await db.collection('scores')
        .orderBy('moves')
        .orderBy('time')
        .limit(50)
        .get();

      const scores = [];
      snapshot.forEach(doc => {
        const data = doc.data();
        scores.push({
          ...data,
          id: doc.id, // æ·»åŠ æ–‡æ¡£IDç”¨äºkeyå±æ€§
          timestamp: data.timestamp || Date.now() // ç¡®ä¿æœ‰æ—¶é—´æˆ³
        });
      });

      console.log('Firebase scores loaded:', scores.length); // è°ƒè¯•æ—¥å¿—
      setLeaderboard(scores);
      return;
    } catch (error) {
      console.error('Error loading Firebase leaderboard:', error);
      console.log('Falling back to local storage...');
    }
  }

  // Fallback to local storage
  loadLocalLeaderboard();
};

const loadLocalLeaderboard = () => {
  try {
    const stored = localStorage.getItem('spooky_leaderboard');
    if (stored) {
      const scores = JSON.parse(stored);
      // ç¡®ä¿æ­£ç¡®æ’åº
      scores.sort((a, b) => {
        if (a.moves !== b.moves) return a.moves - b.moves;
        return a.time - b.time;
      });
      console.log('Local scores loaded:', scores.length); // è°ƒè¯•æ—¥å¿—
      setLeaderboard(scores);
    } else {
      setLeaderboard([]);
    }
  } catch (error) {
    console.error('Error loading local leaderboard:', error);
    setLeaderboard([]);
  }
};

      const checkWin = (currentTiles) => {
        return currentTiles.every((tile, index) => tile === index);
      };

      const getEmptyIndex = (currentTiles) => {
        return currentTiles.indexOf(8);
      };

      const canMove = (tileIndex, emptyIndex) => {
        const tileRow = Math.floor(tileIndex / 3);
        const tileCol = tileIndex % 3;
        const emptyRow = Math.floor(emptyIndex / 3);
        const emptyCol = emptyIndex % 3;

        return (
          (Math.abs(tileRow - emptyRow) === 1 && tileCol === emptyCol) ||
          (Math.abs(tileCol - emptyCol) === 1 && tileRow === emptyRow)
        );
      };

      const handleTileClick = (index) => {
        if (isWon) return;

        const emptyIndex = getEmptyIndex(tiles);

        if (canMove(index, emptyIndex)) {
          const newTiles = [...tiles];
          [newTiles[index], newTiles[emptyIndex]] = [newTiles[emptyIndex], newTiles[index]];
          setTiles(newTiles);
          setMoves(moves + 1);

          setAnimatingTile(emptyIndex);
          setTimeout(() => setAnimatingTile(null), 300);

          if (checkWin(newTiles)) {
            const endTime = Date.now();
            const timeTaken = Math.floor((endTime - startTime) / 1000);
            setCompletionTime(timeTaken);
            setIsWon(true);
            setShowNameInput(true);
          }
        }
      };

      const shuffleTiles = () => {
        let shuffled = [...tiles];

        for (let i = 0; i < 100; i++) {
          const emptyIndex = shuffled.indexOf(8);
          const validMoves = [];

          const row = Math.floor(emptyIndex / 3);
          const col = emptyIndex % 3;

          if (row > 0) validMoves.push(emptyIndex - 3);
          if (row < 2) validMoves.push(emptyIndex + 3);
          if (col > 0) validMoves.push(emptyIndex - 1);
          if (col < 2) validMoves.push(emptyIndex + 1);

          const randomMove = validMoves[Math.floor(Math.random() * validMoves.length)];
          [shuffled[emptyIndex], shuffled[randomMove]] = [shuffled[randomMove], shuffled[emptyIndex]];
        }

        setTiles(shuffled);
        setMoves(0);
        setIsWon(false);
        setStartTime(Date.now());
        setShowNameInput(false);
      };

      const resetPuzzle = () => {
        setTiles([0, 1, 2, 3, 4, 5, 6, 7, 8]);
        setMoves(0);
        setIsWon(false);
        setStartTime(null);
        setShowNameInput(false);
      };

      const handleImageUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (event) => {
            setImage(event.target.result);
            resetPuzzle();
          };
          reader.readAsDataURL(file);
        }
      };

const saveScore = async () => {
    if (!playerName.trim()) {
        alert('Please enter your name! ğŸ‘»');
        return;
    }

    const scoreData = {
        name: playerName.trim(),
        moves: moves,
        time: completionTime,
        timestamp: Date.now()
    };

    console.log('Saving score:', scoreData); // è°ƒè¯•æ—¥å¿—

    // Try Firebase first
    if (db && firebaseInitialized) {
        try {
            await db.collection('scores').add(scoreData);
            setShowNameInput(false);
            setPlayerName(''); // æ¸…ç©ºåå­—è¾“å…¥æ¡†

            // ç«‹å³é‡æ–°åŠ è½½æ’è¡Œæ¦œ
            await loadLeaderboard();
            setShowLeaderboard(true);

            alert('ğŸ‰ Score saved to GLOBAL leaderboard! Everyone can see your achievement! ğŸ†');
            return;
        } catch (error) {
            console.error('Failed to save to Firebase:', error);
            alert('âš ï¸ Could not save to global leaderboard. Saving locally instead...');
        }
    }

    // Fallback to local storage - è¿™æ˜¯å”¯ä¸€åº”è¯¥å­˜åœ¨çš„æœ¬åœ°å­˜å‚¨ä»£ç 
    try {
        const stored = localStorage.getItem('spooky_leaderboard');
        const scores = stored ? JSON.parse(stored) : [];
        scores.push(scoreData);

        // ç¡®ä¿æ­£ç¡®æ’åº
        scores.sort((a, b) => {
            if (a.moves !== b.moves) return a.moves - b.moves;
            return a.time - b.time;
        });

        // åªä¿ç•™å‰50å
        const topScores = scores.slice(0, 50);

        localStorage.setItem('spooky_leaderboard', JSON.stringify(topScores));
        setShowNameInput(false);
        setPlayerName(''); // æ¸…ç©ºåå­—è¾“å…¥æ¡†

        // ç«‹å³æ›´æ–°æœ¬åœ°æ’è¡Œæ¦œ - ä½¿ç”¨ setLeaderboard è€Œä¸æ˜¯ loadLocalLeaderboard
        setLeaderboard(topScores);
        setShowLeaderboard(true);

        alert('ğŸ‰ Score saved locally! (Only you can see this score)');
    } catch (error) {
        console.error('Failed to save score:', error);
        alert('âŒ Failed to save score. Please try again.');
    }
};





      const formatTime = (seconds) => {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins}:${secs.toString().padStart(2, '0')}`;
      };

      const getTileStyle = (tileNumber) => {
        if (tileNumber === 8) return {};

        const row = Math.floor(tileNumber / 3);
        const col = tileNumber % 3;

        return {
          backgroundImage: image ? `url(${image})` : 'linear-gradient(135deg, #ff6b35 0%, #8b0000 100%)',
          backgroundSize: '300%',
          backgroundPosition: `${col * 50}% ${row * 50}%`,
        };
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-orange-900 via-purple-900 to-black flex items-center justify-center p-4 relative overflow-hidden">
          {floatingIcons.map((item) => (
            <div
              key={item.id}
              className="absolute animate-pulse opacity-20"
              style={{
                left: `${item.left}%`,
                top: `${item.top}%`,
                fontSize: `${item.size}rem`,
                animation: `float ${item.duration}s ease-in-out infinite`,
                animationDelay: `${item.delay}s`,
                pointerEvents: 'none'
              }}
            >
              {item.icon}
            </div>
          ))}

          <div className="bg-gradient-to-br from-gray-900 to-black rounded-2xl shadow-2xl p-8 max-w-md w-full border-4 border-orange-600 relative z-10 transition-all hover:scale-105" style={{animation: 'glow 3s ease-in-out infinite'}}>
            <div className="absolute top-0 left-0 text-6xl opacity-40 animate-pulse">ğŸ•¸ï¸</div>
            <div className="absolute top-0 right-0 text-6xl opacity-40 transform scale-x-[-1] animate-pulse">ğŸ•¸ï¸</div>
            <div className="absolute -top-6 left-1/2 transform -translate-x-1/2 text-5xl" style={{animation: 'shake 2s ease-in-out infinite'}}>ğŸ•·ï¸</div>

            <div className="absolute -top-4 -left-4 text-4xl animate-bounce">ğŸƒ</div>
            <div className="absolute -top-4 -right-4 text-4xl animate-bounce" style={{animationDelay: '0.5s'}}>ğŸ‘»</div>
            <div className="absolute -bottom-4 -left-4 text-4xl animate-bounce" style={{animationDelay: '1s'}}>ğŸ’€</div>
            <div className="absolute -bottom-4 -right-4 text-4xl animate-bounce" style={{animationDelay: '1.5s'}}>ğŸ¦‡</div>

            <h1 className="text-5xl font-bold text-center mb-2 text-orange-500 drop-shadow-lg animate-pulse" style={{fontFamily: 'Georgia, serif', textShadow: '0 0 20px rgba(255, 107, 53, 0.8)'}}>
              ğŸƒ Spooky Puzzle ğŸƒ
            </h1>
            <p className="text-center text-orange-300 mb-2 text-sm italic animate-pulse">
              Dare to solve it... if you can! ğŸ‘»
            </p>
            {!firebaseInitialized && (
              <p className="text-center text-yellow-400 text-xs mb-4 bg-black bg-opacity-40 rounded px-2 py-1">
                â„¹ï¸ Local mode - Configure Firebase for global leaderboard
              </p>
            )}
            {firebaseInitialized && (
              <p className="text-center text-green-400 text-xs mb-4 bg-black bg-opacity-40 rounded px-2 py-1">
                ğŸŒ Global leaderboard active!
              </p>
            )}

            <div className="mb-6 flex flex-col gap-3">
              <input
                ref={fileInputRef}
                type="file"
                accept="image/*"
                onChange={handleImageUpload}
                className="hidden"
              />
              <button
                onClick={() => fileInputRef.current.click()}
                className="w-full bg-gradient-to-r from-purple-600 to-purple-800 hover:from-purple-700 hover:to-purple-900 text-white font-semibold py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-2 border-2 border-purple-400 shadow-lg hover:shadow-purple-500 hover:scale-105 active:scale-95"
              >
                ğŸ“¤ Upload Spooky Image ğŸ‘»
              </button>

              <div className="flex gap-3">
                <button
                  onClick={shuffleTiles}
                  className="flex-1 bg-gradient-to-r from-orange-600 to-orange-800 hover:from-orange-700 hover:to-orange-900 text-white font-semibold py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-2 border-2 border-orange-400 shadow-lg hover:shadow-orange-500 hover:scale-105 active:scale-95"
                >
                  ğŸ”€ Haunt ğŸƒ
                </button>
                <button
                  onClick={resetPuzzle}
                  className="flex-1 bg-gradient-to-r from-gray-600 to-gray-800 hover:from-gray-700 hover:to-gray-900 text-white font-semibold py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-2 border-2 border-gray-400 shadow-lg hover:shadow-gray-500 hover:scale-105 active:scale-95"
                >
                  â†º Reset ğŸ¦‡
                </button>
              </div>

              <button
                onClick={() => setShowLeaderboard(!showLeaderboard)}
                className="w-full bg-gradient-to-r from-yellow-600 to-yellow-800 hover:from-yellow-700 hover:to-yellow-900 text-white font-semibold py-3 px-4 rounded-lg transition-all flex items-center justify-center gap-2 border-2 border-yellow-400 shadow-lg hover:shadow-yellow-500 hover:scale-105 active:scale-95"
              >
                ğŸ† {showLeaderboard ? 'Hide' : 'Show'} Leaderboard ğŸ†
              </button>
            </div>

            {showLeaderboard && (
              <div className="mb-4 bg-black bg-opacity-80 rounded-lg p-4 border-2 border-yellow-500 max-h-64 overflow-y-auto">
                <h3 className="text-xl font-bold text-yellow-400 text-center mb-3 flex items-center justify-center gap-2">
                  ğŸ† Hall of Fame ğŸ†
                </h3>
                {leaderboard.length === 0 ? (
                  <p className="text-gray-400 text-center">No scores yet. Be the first! ğŸ‘»</p>
                ) : (
                  <div className="space-y-2">
                    {leaderboard.map((score, index) => (
  <div
    key={score.id || score.timestamp || index} // ä½¿ç”¨æ›´å¯é çš„key
    className={`flex items-center justify-between p-2 rounded ${
      index === 0
        ? 'bg-yellow-900 border-2 border-yellow-400'
        : index === 1
        ? 'bg-gray-700 border-2 border-gray-400'
        : index === 2
        ? 'bg-orange-900 border-2 border-orange-400'
        : 'bg-gray-800 border border-gray-600'
    }`}
  >
    <div className="flex items-center gap-3">
      <span className="text-2xl font-bold text-white">
        {index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : `#${index + 1}`}
      </span>
      <span className="text-white font-semibold">{score.name}</span>
    </div>
    <div className="flex items-center gap-3 text-sm">
      <span className="text-orange-300">{score.moves} moves</span>
      <span className="text-blue-300">â±ï¸ {formatTime(score.time)}</span>
    </div>
  </div>
))}
                  </div>
                )}
              </div>
            )}

            <div className="mb-4 text-center bg-black bg-opacity-50 rounded-lg p-3 border-2 border-orange-500 relative overflow-hidden">
              <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-orange-500 to-transparent animate-pulse"></div>
              <span className="text-xl font-bold text-orange-400 flex items-center justify-center gap-2">
                <span className="animate-pulse">ğŸ‘ï¸</span>
                Moves: <span className="text-orange-300 text-2xl">{moves}</span>
                <span className="animate-pulse">ğŸ‘ï¸</span>
              </span>
              <div className="absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-orange-500 to-transparent animate-pulse"></div>
            </div>

            {isWon && showNameInput && (
              <div className="mb-4 bg-gradient-to-r from-green-900 to-green-800 border-4 border-green-500 rounded-lg p-4 text-center shadow-xl relative overflow-hidden">
                <p className="text-green-300 font-bold text-3xl">ğŸ‰ BOO-tiful! ğŸ‰</p>
                <p className="text-green-200 text-lg mt-2">You escaped in {moves} moves!</p>
                <p className="text-blue-200 text-md mt-1 flex items-center justify-center gap-2">
                  â±ï¸ Time: {formatTime(completionTime)}
                </p>
                <p className="text-yellow-300 text-4xl mt-3 mb-4">ğŸ†ğŸ‘»ğŸ¦‡ğŸƒğŸ’€</p>

                <div className="mt-4">
                  <input
                    type="text"
                    placeholder="Enter your name..."
                    value={playerName}
                    onChange={(e) => setPlayerName(e.target.value)}
                    onKeyPress={(e) => e.key === 'Enter' && saveScore()}
                    className="w-full px-4 py-2 rounded-lg bg-black bg-opacity-50 text-white border-2 border-green-400 placeholder-gray-400 focus:outline-none focus:border-green-300 mb-3"
                    maxLength={20}
                    autoFocus
                  />
                  <button
                    onClick={saveScore}
                    className="w-full bg-gradient-to-r from-green-600 to-green-800 hover:from-green-700 hover:to-green-900 text-white font-bold py-2 px-4 rounded-lg transition-all border-2 border-green-400 hover:scale-105 active:scale-95"
                  >
                    Save Score to Hall of Fame! ğŸ†
                  </button>
                </div>
              </div>
            )}

            {isWon && !showNameInput && (
              <div className="mb-4 bg-gradient-to-r from-green-900 to-green-800 border-4 border-green-500 rounded-lg p-4 text-center shadow-xl relative overflow-hidden">
                <p className="text-green-300 font-bold text-3xl">Score Saved! ğŸ‰</p>
                <p className="text-yellow-300 text-4xl mt-3">ğŸ†ğŸ‘»ğŸ¦‡ğŸƒğŸ’€</p>
              </div>
            )}

            <div className="grid grid-cols-3 gap-2 bg-black bg-opacity-60 p-3 rounded-xl border-4 border-orange-700 shadow-2xl relative">
              <div className="absolute -top-3 -left-3 text-3xl animate-spin" style={{animationDuration: '10s'}}>ğŸ•¸ï¸</div>
              <div className="absolute -top-3 -right-3 text-3xl animate-spin" style={{animationDuration: '8s', animationDirection: 'reverse'}}>ğŸ•¸ï¸</div>

              {tiles.map((tile, index) => (
                <div
                  key={index}
                  onClick={() => handleTileClick(index)}
                  className={`aspect-square rounded-lg flex items-center justify-center text-2xl font-bold transition-all ${
                    tile === 8
                      ? 'bg-gray-900 cursor-default border-2 border-orange-800 animate-pulse'
                      : 'bg-white cursor-pointer hover:scale-110 hover:rotate-3 shadow-md hover:shadow-2xl border-2 border-orange-600 hover:border-orange-400 active:scale-95'
                  } ${animatingTile === index ? 'blood-slide' : ''}`}
                  style={getTileStyle(tile)}
                >
                  {!image && tile !== 8 && (
                    <span className="text-white drop-shadow-lg text-3xl animate-pulse" style={{textShadow: '2px 2px 8px black, 0 0 10px orange'}}>
                      {tile + 1}
                    </span>
                  )}
                </div>
              ))}

              <div className="absolute -bottom-3 -left-3 text-2xl animate-bounce">ğŸ¦‡</div>
              <div className="absolute -bottom-3 -right-3 text-2xl animate-bounce" style={{animationDelay: '0.5s'}}>ğŸˆâ€â¬›</div>
            </div>

            <div className="mt-6 text-center text-sm text-orange-200 italic flex items-center justify-center gap-2 animate-pulse">
              <span className="text-xl">ğŸ•·ï¸</span>
              Click tiles near the void to move them
              <span className="text-xl">ğŸ•·ï¸</span>
            </div>

            <div className="mt-4 flex justify-center gap-4 text-3xl">
              <span className="animate-bounce">ğŸ¬</span>
              <span className="animate-bounce" style={{animationDelay: '0.2s'}}>ğŸ­</span>
              <span className="animate-bounce" style={{animationDelay: '0.4s'}}>ğŸƒ</span>
              <span className="animate-bounce" style={{animationDelay: '0.6s'}}>ğŸ‘»</span>
              <span className="animate-bounce" style={{animationDelay: '0.8s'}}>ğŸ¦‡</span>
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.render(<SlidingPuzzle />, document.getElementById('root'));
    </script>
</body>
</html>